<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>üìö Danh s√°ch s√°ch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body style="background-color: #f8f9fa; position: relative;">
<div class="container py-5">

    <!-- N√∫t quay l·∫°i trang ch·ªß ·ªü g√≥c ph·∫£i tr√™n c√πng -->
    <a href="/" class="btn btn-secondary position-absolute top-0 end-0 m-3">üè† Trang ch·ªß</a>

    <h2 class="text-primary mb-4">üìö Danh s√°ch S√°ch</h2>

        <form th:action="@{/book}" method="get" class="mb-4 d-flex gap-2">
        <input type="text" name="keyword" class="form-control" placeholder="üîç T√¨m ki·∫øm theo t√™n s√°ch, t√°c gi·∫£..." 
            th:value="${keyword}">
        <button type="submit" class="btn btn-outline-secondary">T√¨m ki·∫øm</button>
    </form>


    <table class="table table-bordered table-hover shadow-sm rounded bg-white">
        <thead class="table-dark">
            <tr>
                <th>M√£ s√°ch</th>
                <th>T√™n s√°ch</th>
                <th>T√°c gi·∫£</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="book : ${books}">
                <td th:text="${book.id}">B001</td>
                <td th:text="${book.title}">T√™n s√°ch</td>
                <td th:text="${book.author}">T√°c gi·∫£</td>
                <td th:text="${book.borrowed ? 'ƒê√£ m∆∞·ª£n' : 'C√≥ s·∫µn'}">C√≥ s·∫µn</td>
                <td>
                    <div class="d-flex gap-2">
                        <!-- M∆∞·ª£n s√°ch -->
                        <form th:action="@{/borrowbook}" method="post" th:if="${!book.borrowed}">
                            <input type="hidden" name="bookId" th:value="${book.id}" />
                            <button type="submit" class="btn btn-sm btn-success">M∆∞·ª£n</button>
                        </form>

                        <!-- Tr·∫£ s√°ch -->
                        <form th:action="@{/returnBook}" method="post" th:if="${book.borrowed}">
                            <input type="hidden" name="bookId" th:value="${book.id}" />
                            <button type="submit" class="btn btn-sm btn-warning">Tr·∫£</button>
                        </form>

                        <!-- S·ª≠a s√°ch -->
                        <a th:href="@{'/book/edit/' + ${book.id}}" class="btn btn-sm btn-primary">‚úèÔ∏è</a>

                        <!-- X√≥a s√°ch -->
                        <form th:action="@{/book/delete}" method="post" 
                              onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s√°ch n√†y kh√¥ng?')">
                            <input type="hidden" name="id" th:value="${book.id}" />
                            <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è</button>
                        </form>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- N√∫t th√™m s√°ch -->
    <div class="mt-3">
        <a href="/book/add" class="btn btn-outline-primary">‚ûï Th√™m S√°ch</a>
    </div>

</div>
</body>
</html>
