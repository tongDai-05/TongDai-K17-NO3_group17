<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>๐ Danh sรกch Sรกch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body style="background-color: #f8f9fa; position: relative;">
<div class="container py-5">

    <a href="/" class="btn btn-secondary position-absolute top-0 end-0 m-3">๐ Trang chแปง</a>

    <h2 class="text-primary mb-4">๐ Danh sรกch Sรกch</h2>

    <form th:action="@{/book}" method="get" class="mb-4 d-flex gap-2">
        <input type="text" name="keyword" class="form-control" placeholder="๐ Tรฌm kiแบฟm theo tรชn sรกch, tรกc giแบฃ..."
               th:value="${keyword}">
        <button type="submit" class="btn btn-outline-secondary">Tรฌm kiแบฟm</button>
    </form>

    <table class="table table-bordered table-hover shadow-sm rounded bg-white">
        <thead class="table-dark">
        <tr>
            <th>Mรฃ sรกch</th>
            <th>Tรชn sรกch</th>
            <th>Tรกc giแบฃ</th>
            <th>Trแบกng thรกi</th>
            <th>Hรnh ฤแปng</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="book : ${books}">
            <td th:text="${book.id}">B001</td>
            <td th:text="${book.title}">Tรชn sรกch</td>
            <td th:text="${book.author}">Tรกc giแบฃ</td>
            <td th:text="${book.borrowed ? 'ฤรฃ mฦฐแปฃn' : 'Cรณ sแบตn'}">Cรณ sแบตn</td>
            <td>
                <div class="d-flex gap-2">
                    <!-- Mฦฐแปฃn sรกch: mแป form phiแบฟu -->
                    <a th:href="@{'/book/borrow/' + ${book.id}}"
                       th:if="${!book.borrowed}"
                       class="btn btn-sm btn-success">Mฦฐแปฃn</a>

                    <!-- Trแบฃ sรกch -->
                    <form th:action="@{/book/return}" method="post" th:if="${book.borrowed}">
                        <input type="hidden" name="bookId" th:value="${book.id}" />
                        <button type="submit" class="btn btn-sm btn-warning">Trแบฃ</button>
                    </form>

                    >
                    <a th:href="@{'/book/edit/' + ${book.id}}" class="btn btn-sm btn-primary">โ๏ธ</a>

                    
                    <form th:action="@{/book/delete}" method="post"
                          onsubmit="return confirm('Bแบกn cรณ chแบฏc chแบฏn muแปn xรณa sรกch nรy khรดng?')">
                        <input type="hidden" name="id" th:value="${book.id}" />
                        <button type="submit" class="btn btn-sm btn-danger">๐๏ธ</button>
                    </form>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <div class="mt-3">
        <a href="/book/add" class="btn btn-outline-primary">โ Thรชm Sรกch</a>
        <a href="/borrowrecords" class="btn btn-outline-dark">๐ Xem Phiแบฟu Mฦฐแปฃn</a>
    </div>

</div>
</body>
</html>
